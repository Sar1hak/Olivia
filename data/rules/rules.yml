version: "2.0"

rules:

- rule: activate health form
  steps:
  - action: utter_take_health_info
  - intent: response2
    entities:
    - confirm_health_intake: "True"
  - slot_was_set:
    - confirm_health_intake: "True"
  - action: health_form
  - active_loop: health_form

- rule: deactivate health form
  condition:
  - active_loop: health_form
  steps:
  - slot_was_set:
    - requested_slot: exercise
  - slot_was_set:
    - exercise: "Regularly"
  - slot_was_set:
    - requested_slot: water
  - slot_was_set:
    - water: "2 liters"
  - slot_was_set:
    - requested_slot: stress
  - slot_was_set:
    - stress: "high"
  - slot_was_set:
    - requested_slot: sleep
  - slot_was_set:
    - sleep: "8 hours"
  - slot_was_set:
    - requested_slot: history
  - slot_was_set:
    - history: "I have many problems"
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_submit_health_data
  - action: utter_take_info

- rule: continue health form
  condition:
  - active_loop: health_form
  steps:
  - action: utter_ask_continue
  - intent: affirm
    entities:
    - confirm_health_intake: "True"
  - slot_was_set:
    - confirm_health_intake: "True"
  - action: health_form
  - slot_was_set:
    - requested_slot: exercise
  - slot_was_set:
    - exercise: "Regularly"
  - slot_was_set:
    - requested_slot: water
  - slot_was_set:
    - water: "2 liters"
  - slot_was_set:
    - requested_slot: stress
  - slot_was_set:
    - stress: "high"
  - slot_was_set:
    - requested_slot: sleep
  - slot_was_set:
    - sleep: "8 hours"
  - slot_was_set:
    - request_slot: relation
  - slot_was_set:
    - relation: "Good"
  - slot_was_set:
    - requested_slot: history
  - slot_was_set:
    - history: "I have many problems"
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_submit_health_data

- rule: don't continue health form
  condition:
  - active_loop: health_form
  steps:
  - action: utter_ask_continue
  - intent: deny
    entities:
    - confirm_health_intake: "False"
  - slot_was_set:
    - confirm_health_intake: "False"
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_no_worries
  - action: utter_anything_else

- rule: chitchat in health form
  condition:
  - active_loop: health_form
  steps:
  - intent: chitchat
  - action: utter_chitchat
  - action: utter_ask_continue


- rule: out of scope in health form
  condition:
  - active_loop: health_form
  steps:
  - intent: out_of_scope
  - action: utter_out_of_scope
  - action: utter_ask_continue









- rule: activate personal data form
  steps:
  - action: utter_take_info
  - intent: response3
    entities:
    - confirm_data_intake: "True"
  - slot_was_set:
    - confirm_data_intake: "True"
  - action: personal_data_form
  - active_loop: personal_data_form

- rule: deactivate personal data form
  condition:
  - active_loop: personal_data_form
  steps:
  - slot_was_set:
    - requested_slot: person_name
  - slot_was_set:
    - person_name: "James Thomson"
  - slot_was_set:
    - requested_slot: age
  - slot_was_set:
    - age: 99
  - slot_was_set:
    - requested_slot: gender
  - slot_was_set:
    - gender: "others"
  - slot_was_set:
    - requested_slot: blood_type
  - slot_was_set:
    - blood_type: "A+"
  - slot_was_set:
    - requested_slot: phone_num
  - slot_was_set:
    - phone_num: "9114208400"
  - slot_was_set:
    - requested_slot: email
  - slot_was_set:
    - email: "bighero@gmail.com"
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_submit_personal_data
  - action: action_disease_evaluation


- rule: continue personal data form
  condition:
  - active_loop: personal_data_form
  steps:
  - action: utter_ask_continue
  - intent: affirm
    entities:
    - confirm_data_intake: "True"
  - slot_was_set:
    - confirm_data_intake: "True"
  - action: personal_data_form
  - slot_was_set:
    - requested_slot: person_name
  - slot_was_set:
    - person_name: "James Thomson"
  - slot_was_set:
    - requested_slot: age
  - slot_was_set:
    - age: 99
  - slot_was_set:
    - requested_slot: gender
  - slot_was_set:
    - gender: "others"
  - slot_was_set:
    - requested_slot: blood_type
  - slot_was_set:
    - blood_type: "A+"
  - slot_was_set:
    - requested_slot: phone_num
  - slot_was_set:
    - phone_num: "9114208400"
  - slot_was_set:
    - requested_slot: email
  - slot_was_set:
    - email: "bighero@gmail.com"
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_submit_personal_data


- rule: don't continue personal data form
  condition:
  - active_loop: personal_data_form
  steps:
  - action: utter_ask_continue
  - intent: deny
    entities:
    - confirm_data_intake: "False"
  - slot_was_set:
    - confirm_data_intake: "False"
  - action: utter_no_worries
  - action: action_deactivate_loop
  - active_loop: null

- rule: chitchat in personal data form
  condition:
  - active_loop: personal_data_form
  steps:
  - intent: chitchat
  - action: utter_chitchat
  - action: utter_ask_continue

- rule: out of scope in personal data form
  condition:
  - active_loop: personal_data_form
  steps:
  - intent: out_of_scope
  - action: utter_out_of_scope
  - action: utter_ask_continue